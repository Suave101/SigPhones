<html>

<head>
  <title>SigPhones</title>
  <script type="text/javascript" src="https://damianofalcioni.github.io/js-aruco2/src/cv.js"></script>
  <script type="text/javascript" src="https://damianofalcioni.github.io/js-aruco2/src/aruco.js"></script>
  <link rel="stylesheet" href="main.css">
  <script>
    var video, canvas, context, imageData, detector, videoData;
    var markers_seen = new Array();
    window.addEventListener('load', function() {
      document.querySelector('input[type="file"]').addEventListener('change', function() {
          if (this.files && this.files[0]) {
              imageData = URL.createObjectURL(this.files[0]); // set src to blob url
          }
      });
    });

    detector = new AR.Detector({
      dictionaryName: 'ARUCO'
    });

    function processImage() {
      var markers = detector.detect(imageData);
      getId(markers);
    }

    function getId(markers){
      var corners, corner, x, y, i, j;
      for (i = 0; i !== markers.length; ++ i){
        if (markers_seen.includes(markers[i].id) == false) {
          markers_seen.push(markers[i].id);
        }
      }
      document.getElementById("phones").innerHTML = "Phones Detected: " + markers_seen
    }

    // window.onload = onLoad;
  </script>

</head>

<body style="font-family: monospace;">

  <center>
    <h1>>SigPhones</h1>
    <input type='file' accept="image/*"/>
    <p class="text" id="phones">Phones Detected: </p>
    <button class="btn" onclick="" style="width:100%;height:5%">Save Data to a Spreadsheet</button>
    <video id="video" autoplay="true" style="display:none;"></video>
    <canvas id="canvas"></canvas><br>
  </center>

</body>

</html>